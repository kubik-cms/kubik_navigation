(function(W,ue){typeof exports=="object"&&typeof module!="undefined"?ue(exports):typeof define=="function"&&define.amd?define(["exports"],ue):(W=typeof globalThis!="undefined"?globalThis:W||self,ue(W.navigation={}))})(this,function(W){"use strict";function ue(t){return t.replace(/(?:[_-])([a-z0-9])/g,(e,n)=>n.toUpperCase())}function Zt(t){return ue(t.replace(/--/g,"-").replace(/__/g,"_"))}function Ne(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Qt(t){return t.replace(/([A-Z])/g,(e,n)=>`-${n.toLowerCase()}`)}function vt(t){return t!=null}function bt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Je(t,e){const n=yt(t);return Array.from(n.reduce((r,o)=>(tn(o,e).forEach(i=>r.add(i)),r),new Set))}function en(t,e){return yt(t).reduce((r,o)=>(r.push(...nn(o,e)),r),[])}function yt(t){const e=[];for(;t;)e.push(t),t=Object.getPrototypeOf(t);return e.reverse()}function tn(t,e){const n=t[e];return Array.isArray(n)?n:[]}function nn(t,e){const n=t[e];return n?Object.keys(n).map(r=>[r,n[r]]):[]}(()=>{function t(n){function r(){return Reflect.construct(n,arguments,new.target)}return r.prototype=Object.create(n.prototype,{constructor:{value:r}}),Reflect.setPrototypeOf(r,n),r}function e(){const r=t(function(){this.a.call(this)});return r.prototype.a=function(){},new r}try{return e(),t}catch{return r=>class extends r{}}})(),Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},wt("abcdefghijklmnopqrstuvwxyz".split("").map(t=>[t,t]))),wt("0123456789".split("").map(t=>[t,t])));function wt(t){return t.reduce((e,[n,r])=>Object.assign(Object.assign({},e),{[n]:r}),{})}function rn(t){return Je(t,"classes").reduce((n,r)=>Object.assign(n,on(r)),{})}function on(t){return{[`${t}Class`]:{get(){const{classes:e}=this;if(e.has(t))return e.get(t);{const n=e.getAttributeName(t);throw new Error(`Missing attribute "${n}"`)}}},[`${t}Classes`]:{get(){return this.classes.getAll(t)}},[`has${Ne(t)}Class`]:{get(){return this.classes.has(t)}}}}function an(t){return Je(t,"outlets").reduce((n,r)=>Object.assign(n,sn(r)),{})}function Tt(t,e,n){return t.application.getControllerForElementAndIdentifier(e,n)}function Et(t,e,n){let r=Tt(t,e,n);if(r||(t.application.router.proposeToConnectScopeForElementAndIdentifier(e,n),r=Tt(t,e,n),r))return r}function sn(t){const e=Zt(t);return{[`${e}Outlet`]:{get(){const n=this.outlets.find(t),r=this.outlets.getSelectorForOutletName(t);if(n){const o=Et(this,n,t);if(o)return o;throw new Error(`The provided outlet element is missing an outlet controller "${t}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${t}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${r}".`)}},[`${e}Outlets`]:{get(){const n=this.outlets.findAll(t);return n.length>0?n.map(r=>{const o=Et(this,r,t);if(o)return o;console.warn(`The provided outlet element is missing an outlet controller "${t}" instance for host controller "${this.identifier}"`,r)}).filter(r=>r):[]}},[`${e}OutletElement`]:{get(){const n=this.outlets.find(t),r=this.outlets.getSelectorForOutletName(t);if(n)return n;throw new Error(`Missing outlet element "${t}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${r}".`)}},[`${e}OutletElements`]:{get(){return this.outlets.findAll(t)}},[`has${Ne(e)}Outlet`]:{get(){return this.outlets.has(t)}}}}function ln(t){return Je(t,"targets").reduce((n,r)=>Object.assign(n,un(r)),{})}function un(t){return{[`${t}Target`]:{get(){const e=this.targets.find(t);if(e)return e;throw new Error(`Missing target element "${t}" for "${this.identifier}" controller`)}},[`${t}Targets`]:{get(){return this.targets.findAll(t)}},[`has${Ne(t)}Target`]:{get(){return this.targets.has(t)}}}}function cn(t){const e=en(t,"values"),n={valueDescriptorMap:{get(){return e.reduce((r,o)=>{const i=St(o,this.identifier),a=this.data.getAttributeNameForKey(i.key);return Object.assign(r,{[a]:i})},{})}}};return e.reduce((r,o)=>Object.assign(r,dn(o)),n)}function dn(t,e){const n=St(t,e),{key:r,name:o,reader:i,writer:a}=n;return{[o]:{get(){const s=this.data.get(r);return s!==null?i(s):n.defaultValue},set(s){s===void 0?this.data.delete(r):this.data.set(r,a(s))}},[`has${Ne(o)}`]:{get(){return this.data.has(r)||n.hasCustomDefaultValue}}}}function St([t,e],n){return gn({controller:n,token:t,typeDefinition:e})}function Me(t){switch(t){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function me(t){switch(typeof t){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(t))return"array";if(Object.prototype.toString.call(t)==="[object Object]")return"object"}function fn(t){const{controller:e,token:n,typeObject:r}=t,o=vt(r.type),i=vt(r.default),a=o&&i,s=o&&!i,l=!o&&i,u=Me(r.type),f=me(t.typeObject.default);if(s)return u;if(l)return f;if(u!==f){const d=e?`${e}.${n}`:n;throw new Error(`The specified default value for the Stimulus Value "${d}" must match the defined type "${u}". The provided default value of "${r.default}" is of type "${f}".`)}if(a)return u}function hn(t){const{controller:e,token:n,typeDefinition:r}=t,i=fn({controller:e,token:n,typeObject:r}),a=me(r),s=Me(r),l=i||a||s;if(l)return l;const u=e?`${e}.${r}`:n;throw new Error(`Unknown value type "${u}" for "${n}" value`)}function pn(t){const e=Me(t);if(e)return _t[e];const n=bt(t,"default"),r=bt(t,"type"),o=t;if(n)return o.default;if(r){const{type:i}=o,a=Me(i);if(a)return _t[a]}return t}function gn(t){const{token:e,typeDefinition:n}=t,r=`${Qt(e)}-value`,o=hn(t);return{type:o,key:r,name:ue(r),get defaultValue(){return pn(n)},get hasCustomDefaultValue(){return me(n)!==void 0},reader:mn[o],writer:Dt[o]||Dt.default}}const _t={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},mn={array(t){const e=JSON.parse(t);if(!Array.isArray(e))throw new TypeError(`expected value of type "array" but instead got value "${t}" of type "${me(e)}"`);return e},boolean(t){return!(t=="0"||String(t).toLowerCase()=="false")},number(t){return Number(t.replace(/_/g,""))},object(t){const e=JSON.parse(t);if(e===null||typeof e!="object"||Array.isArray(e))throw new TypeError(`expected value of type "object" but instead got value "${t}" of type "${me(e)}"`);return e},string(t){return t}},Dt={default:vn,array:Ct,object:Ct};function Ct(t){return JSON.stringify(t)}function vn(t){return`${t}`}class K{constructor(e){this.context=e}static get shouldLoad(){return!0}static afterLoad(e,n){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:n=this.element,detail:r={},prefix:o=this.identifier,bubbles:i=!0,cancelable:a=!0}={}){const s=o?`${o}:${e}`:e,l=new CustomEvent(s,{detail:r,bubbles:i,cancelable:a});return n.dispatchEvent(l),l}}K.blessings=[rn,ln,cn,an],K.targets=[],K.outlets=[],K.values={};class Ke extends K{connect(){this._renderResults()}_renderResults(){switch(this.fieldsContainerTarget.innerHTML="",this.itemTypeValue){case"resource":this.fieldsContainerTarget.insertAdjacentHTML("beforeend",this.navTemplate("resourceSelectionTemplate")),this.fieldsContainerTarget.insertAdjacentHTML("beforeend",this.navTemplate("resourceTemplate")),this.fieldsContainerTarget.insertAdjacentHTML("beforeend",this.navTemplate("advancedSettingsTemplate"));break;case"header":this.fieldsContainerTarget.insertAdjacentHTML("beforeend",this.navTemplate("headerTemplate"));break;case"link":this.fieldsContainerTarget.insertAdjacentHTML("beforeend",this.navTemplate("linkTemplate")),this.fieldsContainerTarget.insertAdjacentHTML("beforeend",this.navTemplate("advancedSettingsTemplate"));break;case"node":this.fieldsContainerTarget.insertAdjacentHTML("beforeend",this.navTemplate("nodeTemplate"));break}}navTemplate(e){return this[e+"Target"].innerHTML}itemTypeChange(e){this.itemTypeValue=e.target.value}itemTypeValueChanged(){this._renderResults()}}Ke.values={itemType:String},Ke.targets=["advancedSettingsTemplate","headerTemplate","linkTemplate","nodeTemplate","resourceSelectionTemplate","resourceTemplate","fieldsContainer"];/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function B(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ot(Object(n),!0).forEach(function(r){bn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fe(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Fe=function(e){return typeof e}:Fe=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fe(t)}function bn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z(){return z=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},z.apply(this,arguments)}function yn(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,i;for(i=0;i<r.length;i++)o=r[i],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function wn(t,e){if(t==null)return{};var n=yn(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,r)||(n[r]=t[r]))}return n}var Tn="1.15.2";function U(t){if(typeof window!="undefined"&&window.navigator)return!!navigator.userAgent.match(t)}var G=U(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ve=U(/Edge/i),At=U(/firefox/i),be=U(/safari/i)&&!U(/chrome/i)&&!U(/android/i),It=U(/iP(ad|od|hone)/i),Pt=U(/chrome/i)&&U(/android/i),xt={capture:!1,passive:!1};function y(t,e,n){t.addEventListener(e,n,!G&&xt)}function v(t,e,n){t.removeEventListener(e,n,!G&&xt)}function je(t,e){if(!!e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function En(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function $(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&je(t,e):je(t,e))||r&&t===n)return t;if(t===n)break}while(t=En(t))}return null}var Nt=/\s+/g;function N(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(Nt," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(Nt," ")}}function h(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function ce(t,e){var n="";if(typeof t=="string")n=t;else do{var r=h(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function Mt(t,e,n){if(t){var r=t.getElementsByTagName(e),o=0,i=r.length;if(n)for(;o<i;o++)n(r[o],o);return r}return[]}function X(){var t=document.scrollingElement;return t||document.documentElement}function D(t,e,n,r,o){if(!(!t.getBoundingClientRect&&t!==window)){var i,a,s,l,u,f,d;if(t!==window&&t.parentNode&&t!==X()?(i=t.getBoundingClientRect(),a=i.top,s=i.left,l=i.bottom,u=i.right,f=i.height,d=i.width):(a=0,s=0,l=window.innerHeight,u=window.innerWidth,f=window.innerHeight,d=window.innerWidth),(e||n)&&t!==window&&(o=o||t.parentNode,!G))do if(o&&o.getBoundingClientRect&&(h(o,"transform")!=="none"||n&&h(o,"position")!=="static")){var m=o.getBoundingClientRect();a-=m.top+parseInt(h(o,"border-top-width")),s-=m.left+parseInt(h(o,"border-left-width")),l=a+i.height,u=s+i.width;break}while(o=o.parentNode);if(r&&t!==window){var T=ce(o||t),b=T&&T.a,w=T&&T.d;T&&(a/=w,s/=b,d/=b,f/=w,l=a+f,u=s+d)}return{top:a,left:s,bottom:l,right:u,width:d,height:f}}}function Ft(t,e,n){for(var r=Z(t,!0),o=D(t)[e];r;){var i=D(r)[n],a=void 0;if(n==="top"||n==="left"?a=o>=i:a=o<=i,!a)return r;if(r===X())break;r=Z(r,!1)}return!1}function de(t,e,n,r){for(var o=0,i=0,a=t.children;i<a.length;){if(a[i].style.display!=="none"&&a[i]!==p.ghost&&(r||a[i]!==p.dragged)&&$(a[i],n.draggable,t,!1)){if(o===e)return a[i];o++}i++}return null}function Ze(t,e){for(var n=t.lastElementChild;n&&(n===p.ghost||h(n,"display")==="none"||e&&!je(n,e));)n=n.previousElementSibling;return n||null}function V(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==p.clone&&(!e||je(t,e))&&n++;return n}function jt(t){var e=0,n=0,r=X();if(t)do{var o=ce(t),i=o.a,a=o.d;e+=t.scrollLeft*i,n+=t.scrollTop*a}while(t!==r&&(t=t.parentNode));return[e,n]}function Sn(t,e){for(var n in t)if(!!t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function Z(t,e){if(!t||!t.getBoundingClientRect)return X();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=h(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return X();if(r||e)return n;r=!0}}while(n=n.parentNode);return X()}function _n(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Qe(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var ye;function Rt(t,e){return function(){if(!ye){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),ye=setTimeout(function(){ye=void 0},e)}}}function Dn(){clearTimeout(ye),ye=void 0}function Vt(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function $t(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function kt(t,e,n){var r={};return Array.from(t.children).forEach(function(o){var i,a,s,l;if(!(!$(o,e.draggable,t,!1)||o.animated||o===n)){var u=D(o);r.left=Math.min((i=r.left)!==null&&i!==void 0?i:1/0,u.left),r.top=Math.min((a=r.top)!==null&&a!==void 0?a:1/0,u.top),r.right=Math.max((s=r.right)!==null&&s!==void 0?s:-1/0,u.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,u.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var M="Sortable"+new Date().getTime();function Cn(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(o){if(!(h(o,"display")==="none"||o===p.ghost)){t.push({target:o,rect:D(o)});var i=B({},t[t.length-1].rect);if(o.thisAnimationDuration){var a=ce(o,!0);a&&(i.top-=a.f,i.left-=a.e)}o.fromRect=i}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(Sn(t,{target:r}),1)},animateAll:function(r){var o=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var i=!1,a=0;t.forEach(function(s){var l=0,u=s.target,f=u.fromRect,d=D(u),m=u.prevFromRect,T=u.prevToRect,b=s.rect,w=ce(u,!0);w&&(d.top-=w.f,d.left-=w.e),u.toRect=d,u.thisAnimationDuration&&Qe(m,d)&&!Qe(f,d)&&(b.top-d.top)/(b.left-d.left)===(f.top-d.top)/(f.left-d.left)&&(l=An(b,m,T,o.options)),Qe(d,f)||(u.prevFromRect=f,u.prevToRect=d,l||(l=o.options.animation),o.animate(u,b,d,l)),l&&(i=!0,a=Math.max(a,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(e),i?e=setTimeout(function(){typeof r=="function"&&r()},a):typeof r=="function"&&r(),t=[]},animate:function(r,o,i,a){if(a){h(r,"transition",""),h(r,"transform","");var s=ce(this.el),l=s&&s.a,u=s&&s.d,f=(o.left-i.left)/(l||1),d=(o.top-i.top)/(u||1);r.animatingX=!!f,r.animatingY=!!d,h(r,"transform","translate3d("+f+"px,"+d+"px,0)"),this.forRepaintDummy=On(r),h(r,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),h(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){h(r,"transition",""),h(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},a)}}}}function On(t){return t.offsetWidth}function An(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var fe=[],et={initializeByDefault:!0},we={mount:function(e){for(var n in et)et.hasOwnProperty(n)&&!(n in e)&&(e[n]=et[n]);fe.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),fe.push(e)},pluginEvent:function(e,n,r){var o=this;this.eventCanceled=!1,r.cancel=function(){o.eventCanceled=!0};var i=e+"Global";fe.forEach(function(a){!n[a.pluginName]||(n[a.pluginName][i]&&n[a.pluginName][i](B({sortable:n},r)),n.options[a.pluginName]&&n[a.pluginName][e]&&n[a.pluginName][e](B({sortable:n},r)))})},initializePlugins:function(e,n,r,o){fe.forEach(function(s){var l=s.pluginName;if(!(!e.options[l]&&!s.initializeByDefault)){var u=new s(e,n,e.options);u.sortable=e,u.options=e.options,e[l]=u,z(r,u.defaults)}});for(var i in e.options)if(!!e.options.hasOwnProperty(i)){var a=this.modifyOption(e,i,e.options[i]);typeof a!="undefined"&&(e.options[i]=a)}},getEventProperties:function(e,n){var r={};return fe.forEach(function(o){typeof o.eventProperties=="function"&&z(r,o.eventProperties.call(n[o.pluginName],e))}),r},modifyOption:function(e,n,r){var o;return fe.forEach(function(i){!e[i.pluginName]||i.optionListeners&&typeof i.optionListeners[n]=="function"&&(o=i.optionListeners[n].call(e[i.pluginName],r))}),o}};function In(t){var e=t.sortable,n=t.rootEl,r=t.name,o=t.targetEl,i=t.cloneEl,a=t.toEl,s=t.fromEl,l=t.oldIndex,u=t.newIndex,f=t.oldDraggableIndex,d=t.newDraggableIndex,m=t.originalEvent,T=t.putSortable,b=t.extraEventProperties;if(e=e||n&&n[M],!!e){var w,L=e.options,q="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!G&&!ve?w=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(w=document.createEvent("Event"),w.initEvent(r,!0,!0)),w.to=a||n,w.from=s||n,w.item=o||n,w.clone=i,w.oldIndex=l,w.newIndex=u,w.oldDraggableIndex=f,w.newDraggableIndex=d,w.originalEvent=m,w.pullMode=T?T.lastPutMode:void 0;var P=B(B({},b),we.getEventProperties(r,e));for(var H in P)w[H]=P[H];n&&n.dispatchEvent(w),L[q]&&L[q].call(e,w)}}var Pn=["evt"],x=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=r.evt,i=wn(r,Pn);we.pluginEvent.bind(p)(e,n,B({dragEl:c,parentEl:_,ghostEl:g,rootEl:E,nextEl:re,lastDownEl:Re,cloneEl:S,cloneHidden:Q,dragStarted:Ee,putSortable:O,activeSortable:p.active,originalEvent:o,oldIndex:he,oldDraggableIndex:Te,newIndex:F,newDraggableIndex:ee,hideGhostForTarget:zt,unhideGhostForTarget:Ut,cloneNowHidden:function(){Q=!0},cloneNowShown:function(){Q=!1},dispatchSortableEvent:function(s){I({sortable:n,name:s,originalEvent:o})}},i))};function I(t){In(B({putSortable:O,cloneEl:S,targetEl:c,rootEl:E,oldIndex:he,oldDraggableIndex:Te,newIndex:F,newDraggableIndex:ee},t))}var c,_,g,E,re,Re,S,Q,he,F,Te,ee,Ve,O,pe=!1,$e=!1,ke=[],oe,k,tt,nt,Lt,Ht,Ee,ge,Se,_e=!1,Le=!1,He,A,rt=[],ot=!1,Be=[],Xe=typeof document!="undefined",Ye=It,Bt=ve||G?"cssFloat":"float",xn=Xe&&!Pt&&!It&&"draggable"in document.createElement("div"),Xt=function(){if(!!Xe){if(G)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Yt=function(e,n){var r=h(e),o=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),i=de(e,0,n),a=de(e,1,n),s=i&&h(i),l=a&&h(a),u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+D(i).width,f=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+D(a).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&s.float&&s.float!=="none"){var d=s.float==="left"?"left":"right";return a&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return i&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||u>=o&&r[Bt]==="none"||a&&r[Bt]==="none"&&u+f>o)?"vertical":"horizontal"},Nn=function(e,n,r){var o=r?e.left:e.top,i=r?e.right:e.bottom,a=r?e.width:e.height,s=r?n.left:n.top,l=r?n.right:n.bottom,u=r?n.width:n.height;return o===s||i===l||o+a/2===s+u/2},Mn=function(e,n){var r;return ke.some(function(o){var i=o[M].options.emptyInsertThreshold;if(!(!i||Ze(o))){var a=D(o),s=e>=a.left-i&&e<=a.right+i,l=n>=a.top-i&&n<=a.bottom+i;if(s&&l)return r=o}}),r},Wt=function(e){function n(i,a){return function(s,l,u,f){var d=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(i==null&&(a||d))return!0;if(i==null||i===!1)return!1;if(a&&i==="clone")return i;if(typeof i=="function")return n(i(s,l,u,f),a)(s,l,u,f);var m=(a?s:l).options.group.name;return i===!0||typeof i=="string"&&i===m||i.join&&i.indexOf(m)>-1}}var r={},o=e.group;(!o||Fe(o)!="object")&&(o={name:o}),r.name=o.name,r.checkPull=n(o.pull,!0),r.checkPut=n(o.put),r.revertClone=o.revertClone,e.group=r},zt=function(){!Xt&&g&&h(g,"display","none")},Ut=function(){!Xt&&g&&h(g,"display","")};Xe&&!Pt&&document.addEventListener("click",function(t){if($e)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),$e=!1,!1},!0);var ie=function(e){if(c){e=e.touches?e.touches[0]:e;var n=Mn(e.clientX,e.clientY);if(n){var r={};for(var o in e)e.hasOwnProperty(o)&&(r[o]=e[o]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[M]._onDragOver(r)}}},Fn=function(e){c&&c.parentNode[M]._isOutsideThisEl(e.target)};function p(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=z({},e),t[M]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Yt(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,s){a.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:p.supportPointer!==!1&&"PointerEvent"in window&&!be,emptyInsertThreshold:5};we.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);Wt(e);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=e.forceFallback?!1:xn,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?y(t,"pointerdown",this._onTapStart):(y(t,"mousedown",this._onTapStart),y(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(y(t,"dragover",this),y(t,"dragenter",this)),ke.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),z(this,Cn())}p.prototype={constructor:p,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(ge=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,c):this.options.direction},_onTapStart:function(e){if(!!e.cancelable){var n=this,r=this.el,o=this.options,i=o.preventOnFilter,a=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(s||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,f=o.filter;if(Bn(r),!c&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||o.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&be&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=$(l,o.draggable,r,!1),!(l&&l.animated)&&Re!==l)){if(he=V(l),Te=V(l,o.draggable),typeof f=="function"){if(f.call(this,e,l,this)){I({sortable:n,rootEl:u,name:"filter",targetEl:l,toEl:r,fromEl:r}),x("filter",n,{evt:e}),i&&e.cancelable&&e.preventDefault();return}}else if(f&&(f=f.split(",").some(function(d){if(d=$(u,d.trim(),r,!1),d)return I({sortable:n,rootEl:d,name:"filter",targetEl:l,fromEl:r,toEl:r}),x("filter",n,{evt:e}),!0}),f)){i&&e.cancelable&&e.preventDefault();return}o.handle&&!$(u,o.handle,r,!1)||this._prepareDragStart(e,s,l)}}},_prepareDragStart:function(e,n,r){var o=this,i=o.el,a=o.options,s=i.ownerDocument,l;if(r&&!c&&r.parentNode===i){var u=D(r);if(E=i,c=r,_=c.parentNode,re=c.nextSibling,Re=r,Ve=a.group,p.dragged=c,oe={target:c,clientX:(n||e).clientX,clientY:(n||e).clientY},Lt=oe.clientX-u.left,Ht=oe.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,c.style["will-change"]="all",l=function(){if(x("delayEnded",o,{evt:e}),p.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!At&&o.nativeDraggable&&(c.draggable=!0),o._triggerDragStart(e,n),I({sortable:o,name:"choose",originalEvent:e}),N(c,a.chosenClass,!0)},a.ignore.split(",").forEach(function(f){Mt(c,f.trim(),it)}),y(s,"dragover",ie),y(s,"mousemove",ie),y(s,"touchmove",ie),y(s,"mouseup",o._onDrop),y(s,"touchend",o._onDrop),y(s,"touchcancel",o._onDrop),At&&this.nativeDraggable&&(this.options.touchStartThreshold=4,c.draggable=!0),x("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(ve||G))){if(p.eventCanceled){this._onDrop();return}y(s,"mouseup",o._disableDelayedDrag),y(s,"touchend",o._disableDelayedDrag),y(s,"touchcancel",o._disableDelayedDrag),y(s,"mousemove",o._delayedDragTouchMoveHandler),y(s,"touchmove",o._delayedDragTouchMoveHandler),a.supportPointer&&y(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(l,a.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){c&&it(c),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;v(e,"mouseup",this._disableDelayedDrag),v(e,"touchend",this._disableDelayedDrag),v(e,"touchcancel",this._disableDelayedDrag),v(e,"mousemove",this._delayedDragTouchMoveHandler),v(e,"touchmove",this._delayedDragTouchMoveHandler),v(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?y(document,"pointermove",this._onTouchMove):n?y(document,"touchmove",this._onTouchMove):y(document,"mousemove",this._onTouchMove):(y(c,"dragend",this),y(E,"dragstart",this._onDragStart));try{document.selection?ze(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(pe=!1,E&&c){x("dragStarted",this,{evt:n}),this.nativeDraggable&&y(document,"dragover",Fn);var r=this.options;!e&&N(c,r.dragClass,!1),N(c,r.ghostClass,!0),p.active=this,e&&this._appendGhost(),I({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(k){this._lastX=k.clientX,this._lastY=k.clientY,zt();for(var e=document.elementFromPoint(k.clientX,k.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(k.clientX,k.clientY),e!==n);)n=e;if(c.parentNode[M]._isOutsideThisEl(e),n)do{if(n[M]){var r=void 0;if(r=n[M]._onDragOver({clientX:k.clientX,clientY:k.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);Ut()}},_onTouchMove:function(e){if(oe){var n=this.options,r=n.fallbackTolerance,o=n.fallbackOffset,i=e.touches?e.touches[0]:e,a=g&&ce(g,!0),s=g&&a&&a.a,l=g&&a&&a.d,u=Ye&&A&&jt(A),f=(i.clientX-oe.clientX+o.x)/(s||1)+(u?u[0]-rt[0]:0)/(s||1),d=(i.clientY-oe.clientY+o.y)/(l||1)+(u?u[1]-rt[1]:0)/(l||1);if(!p.active&&!pe){if(r&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(g){a?(a.e+=f-(tt||0),a.f+=d-(nt||0)):a={a:1,b:0,c:0,d:1,e:f,f:d};var m="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");h(g,"webkitTransform",m),h(g,"mozTransform",m),h(g,"msTransform",m),h(g,"transform",m),tt=f,nt=d,k=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!g){var e=this.options.fallbackOnBody?document.body:E,n=D(c,!0,Ye,!0,e),r=this.options;if(Ye){for(A=e;h(A,"position")==="static"&&h(A,"transform")==="none"&&A!==document;)A=A.parentNode;A!==document.body&&A!==document.documentElement?(A===document&&(A=X()),n.top+=A.scrollTop,n.left+=A.scrollLeft):A=X(),rt=jt(A)}g=c.cloneNode(!0),N(g,r.ghostClass,!1),N(g,r.fallbackClass,!0),N(g,r.dragClass,!0),h(g,"transition",""),h(g,"transform",""),h(g,"box-sizing","border-box"),h(g,"margin",0),h(g,"top",n.top),h(g,"left",n.left),h(g,"width",n.width),h(g,"height",n.height),h(g,"opacity","0.8"),h(g,"position",Ye?"absolute":"fixed"),h(g,"zIndex","100000"),h(g,"pointerEvents","none"),p.ghost=g,e.appendChild(g),h(g,"transform-origin",Lt/parseInt(g.style.width)*100+"% "+Ht/parseInt(g.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,o=e.dataTransfer,i=r.options;if(x("dragStart",this,{evt:e}),p.eventCanceled){this._onDrop();return}x("setupClone",this),p.eventCanceled||(S=$t(c),S.removeAttribute("id"),S.draggable=!1,S.style["will-change"]="",this._hideClone(),N(S,this.options.chosenClass,!1),p.clone=S),r.cloneId=ze(function(){x("clone",r),!p.eventCanceled&&(r.options.removeCloneOnHide||E.insertBefore(S,c),r._hideClone(),I({sortable:r,name:"clone"}))}),!n&&N(c,i.dragClass,!0),n?($e=!0,r._loopId=setInterval(r._emulateDragOver,50)):(v(document,"mouseup",r._onDrop),v(document,"touchend",r._onDrop),v(document,"touchcancel",r._onDrop),o&&(o.effectAllowed="move",i.setData&&i.setData.call(r,o,c)),y(document,"drop",r),h(c,"transform","translateZ(0)")),pe=!0,r._dragStartId=ze(r._dragStarted.bind(r,n,e)),y(document,"selectstart",r),Ee=!0,be&&h(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,o,i,a,s=this.options,l=s.group,u=p.active,f=Ve===l,d=s.sort,m=O||u,T,b=this,w=!1;if(ot)return;function L(xe,Un){x(xe,b,B({evt:e,isOwner:f,axis:T?"vertical":"horizontal",revert:a,dragRect:o,targetRect:i,canSort:d,fromSortable:m,target:r,completed:P,onMove:function(Kt,Gn){return We(E,n,c,o,Kt,D(Kt),e,Gn)},changed:H},Un))}function q(){L("dragOverAnimationCapture"),b.captureAnimationState(),b!==m&&m.captureAnimationState()}function P(xe){return L("dragOverCompleted",{insertion:xe}),xe&&(f?u._hideClone():u._showClone(b),b!==m&&(N(c,O?O.options.ghostClass:u.options.ghostClass,!1),N(c,s.ghostClass,!0)),O!==b&&b!==p.active?O=b:b===p.active&&O&&(O=null),m===b&&(b._ignoreWhileAnimating=r),b.animateAll(function(){L("dragOverAnimationComplete"),b._ignoreWhileAnimating=null}),b!==m&&(m.animateAll(),m._ignoreWhileAnimating=null)),(r===c&&!c.animated||r===n&&!r.animated)&&(ge=null),!s.dragoverBubble&&!e.rootEl&&r!==document&&(c.parentNode[M]._isOutsideThisEl(e.target),!xe&&ie(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),w=!0}function H(){F=V(c),ee=V(c,s.draggable),I({sortable:b,name:"change",toEl:n,newIndex:F,newDraggableIndex:ee,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=$(r,s.draggable,n,!0),L("dragOver"),p.eventCanceled)return w;if(c.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||b._ignoreWhileAnimating===r)return P(!1);if($e=!1,u&&!s.disabled&&(f?d||(a=_!==E):O===this||(this.lastPutMode=Ve.checkPull(this,u,c,e))&&l.checkPut(this,u,c,e))){if(T=this._getDirection(e,r)==="vertical",o=D(c),L("dragOverValid"),p.eventCanceled)return w;if(a)return _=E,q(),this._hideClone(),L("revert"),p.eventCanceled||(re?E.insertBefore(c,re):E.appendChild(c)),P(!0);var j=Ze(n,s.draggable);if(!j||$n(e,T,this)&&!j.animated){if(j===c)return P(!1);if(j&&n===e.target&&(r=j),r&&(i=D(r)),We(E,n,c,o,r,i,e,!!r)!==!1)return q(),j&&j.nextSibling?n.insertBefore(c,j.nextSibling):n.appendChild(c),_=n,H(),P(!0)}else if(j&&Vn(e,T,this)){var ae=de(n,0,s,!0);if(ae===c)return P(!1);if(r=ae,i=D(r),We(E,n,c,o,r,i,e,!1)!==!1)return q(),n.insertBefore(c,ae),_=n,H(),P(!0)}else if(r.parentNode===n){i=D(r);var Y=0,se,Oe=c.parentNode!==n,R=!Nn(c.animated&&c.toRect||o,r.animated&&r.toRect||i,T),Ae=T?"top":"left",te=Ft(r,"top","top")||Ft(c,"top","top"),Ie=te?te.scrollTop:void 0;ge!==r&&(se=i[Ae],_e=!1,Le=!R&&s.invertSwap||Oe),Y=kn(e,r,i,T,R?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Le,ge===r);var J;if(Y!==0){var le=V(c);do le-=Y,J=_.children[le];while(J&&(h(J,"display")==="none"||J===g))}if(Y===0||J===r)return P(!1);ge=r,Se=Y;var Pe=r.nextElementSibling,ne=!1;ne=Y===1;var qe=We(E,n,c,o,r,i,e,ne);if(qe!==!1)return(qe===1||qe===-1)&&(ne=qe===1),ot=!0,setTimeout(Rn,30),q(),ne&&!Pe?n.appendChild(c):r.parentNode.insertBefore(c,ne?Pe:r),te&&Vt(te,0,Ie-te.scrollTop),_=c.parentNode,se!==void 0&&!Le&&(He=Math.abs(se-D(r)[Ae])),H(),P(!0)}if(n.contains(c))return P(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){v(document,"mousemove",this._onTouchMove),v(document,"touchmove",this._onTouchMove),v(document,"pointermove",this._onTouchMove),v(document,"dragover",ie),v(document,"mousemove",ie),v(document,"touchmove",ie)},_offUpEvents:function(){var e=this.el.ownerDocument;v(e,"mouseup",this._onDrop),v(e,"touchend",this._onDrop),v(e,"pointerup",this._onDrop),v(e,"touchcancel",this._onDrop),v(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(F=V(c),ee=V(c,r.draggable),x("drop",this,{evt:e}),_=c&&c.parentNode,F=V(c),ee=V(c,r.draggable),p.eventCanceled){this._nulling();return}pe=!1,Le=!1,_e=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),at(this.cloneId),at(this._dragStartId),this.nativeDraggable&&(v(document,"drop",this),v(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),be&&h(document.body,"user-select",""),h(c,"transform",""),e&&(Ee&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),g&&g.parentNode&&g.parentNode.removeChild(g),(E===_||O&&O.lastPutMode!=="clone")&&S&&S.parentNode&&S.parentNode.removeChild(S),c&&(this.nativeDraggable&&v(c,"dragend",this),it(c),c.style["will-change"]="",Ee&&!pe&&N(c,O?O.options.ghostClass:this.options.ghostClass,!1),N(c,this.options.chosenClass,!1),I({sortable:this,name:"unchoose",toEl:_,newIndex:null,newDraggableIndex:null,originalEvent:e}),E!==_?(F>=0&&(I({rootEl:_,name:"add",toEl:_,fromEl:E,originalEvent:e}),I({sortable:this,name:"remove",toEl:_,originalEvent:e}),I({rootEl:_,name:"sort",toEl:_,fromEl:E,originalEvent:e}),I({sortable:this,name:"sort",toEl:_,originalEvent:e})),O&&O.save()):F!==he&&F>=0&&(I({sortable:this,name:"update",toEl:_,originalEvent:e}),I({sortable:this,name:"sort",toEl:_,originalEvent:e})),p.active&&((F==null||F===-1)&&(F=he,ee=Te),I({sortable:this,name:"end",toEl:_,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){x("nulling",this),E=c=_=g=re=S=Re=Q=oe=k=Ee=F=ee=he=Te=ge=Se=O=Ve=p.dragged=p.ghost=p.clone=p.active=null,Be.forEach(function(e){e.checked=!0}),Be.length=tt=nt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":c&&(this._onDragOver(e),jn(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,o=0,i=r.length,a=this.options;o<i;o++)n=r[o],$(n,a.draggable,this.el,!1)&&e.push(n.getAttribute(a.dataIdAttr)||Hn(n));return e},sort:function(e,n){var r={},o=this.el;this.toArray().forEach(function(i,a){var s=o.children[a];$(s,this.options.draggable,o,!1)&&(r[i]=s)},this),n&&this.captureAnimationState(),e.forEach(function(i){r[i]&&(o.removeChild(r[i]),o.appendChild(r[i]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return $(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var o=we.modifyOption(this,e,n);typeof o!="undefined"?r[e]=o:r[e]=n,e==="group"&&Wt(r)},destroy:function(){x("destroy",this);var e=this.el;e[M]=null,v(e,"mousedown",this._onTapStart),v(e,"touchstart",this._onTapStart),v(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(v(e,"dragover",this),v(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ke.splice(ke.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Q){if(x("hideClone",this),p.eventCanceled)return;h(S,"display","none"),this.options.removeCloneOnHide&&S.parentNode&&S.parentNode.removeChild(S),Q=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Q){if(x("showClone",this),p.eventCanceled)return;c.parentNode==E&&!this.options.group.revertClone?E.insertBefore(S,c):re?E.insertBefore(S,re):E.appendChild(S),this.options.group.revertClone&&this.animate(c,S),h(S,"display",""),Q=!1}}};function jn(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function We(t,e,n,r,o,i,a,s){var l,u=t[M],f=u.options.onMove,d;return window.CustomEvent&&!G&&!ve?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=o||e,l.relatedRect=i||D(e),l.willInsertAfter=s,l.originalEvent=a,t.dispatchEvent(l),f&&(d=f.call(u,l,a)),d}function it(t){t.draggable=!1}function Rn(){ot=!1}function Vn(t,e,n){var r=D(de(n.el,0,n.options,!0)),o=kt(n.el,n.options,g),i=10;return e?t.clientX<o.left-i||t.clientY<r.top&&t.clientX<r.right:t.clientY<o.top-i||t.clientY<r.bottom&&t.clientX<r.left}function $n(t,e,n){var r=D(Ze(n.el,n.options.draggable)),o=kt(n.el,n.options,g),i=10;return e?t.clientX>o.right+i||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>o.bottom+i||t.clientX>r.right&&t.clientY>r.top}function kn(t,e,n,r,o,i,a,s){var l=r?t.clientY:t.clientX,u=r?n.height:n.width,f=r?n.top:n.left,d=r?n.bottom:n.right,m=!1;if(!a){if(s&&He<u*o){if(!_e&&(Se===1?l>f+u*i/2:l<d-u*i/2)&&(_e=!0),_e)m=!0;else if(Se===1?l<f+He:l>d-He)return-Se}else if(l>f+u*(1-o)/2&&l<d-u*(1-o)/2)return Ln(e)}return m=m||a,m&&(l<f+u*i/2||l>d-u*i/2)?l>f+u/2?1:-1:0}function Ln(t){return V(c)<V(t)?1:-1}function Hn(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function Bn(t){Be.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&Be.push(r)}}function ze(t){return setTimeout(t,0)}function at(t){return clearTimeout(t)}Xe&&y(document,"touchmove",function(t){(p.active||pe)&&t.cancelable&&t.preventDefault()}),p.utils={on:y,off:v,css:h,find:Mt,is:function(e,n){return!!$(e,n,e,!1)},extend:_n,throttle:Rt,closest:$,toggleClass:N,clone:$t,index:V,nextTick:ze,cancelNextTick:at,detectDirection:Yt,getChild:de},p.get=function(t){return t[M]},p.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(p.utils=B(B({},p.utils),r.utils)),we.mount(r)})},p.create=function(t,e){return new p(t,e)},p.version=Tn;var C=[],De,st,lt=!1,ut,ct,Ue,Ce;function Xn(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?y(document,"dragover",this._handleAutoScroll):this.options.supportPointer?y(document,"pointermove",this._handleFallbackAutoScroll):r.touches?y(document,"touchmove",this._handleFallbackAutoScroll):y(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?v(document,"dragover",this._handleAutoScroll):(v(document,"pointermove",this._handleFallbackAutoScroll),v(document,"touchmove",this._handleFallbackAutoScroll),v(document,"mousemove",this._handleFallbackAutoScroll)),Gt(),Ge(),Dn()},nulling:function(){Ue=st=De=lt=Ce=ut=ct=null,C.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var o=this,i=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(i,a);if(Ue=n,r||this.options.forceAutoScrollFallback||ve||G||be){dt(n,this.options,s,r);var l=Z(s,!0);lt&&(!Ce||i!==ut||a!==ct)&&(Ce&&Gt(),Ce=setInterval(function(){var u=Z(document.elementFromPoint(i,a),!0);u!==l&&(l=u,Ge()),dt(n,o.options,u,r)},10),ut=i,ct=a)}else{if(!this.options.bubbleScroll||Z(s,!0)===X()){Ge();return}dt(n,this.options,Z(s,!1),!1)}}},z(t,{pluginName:"scroll",initializeByDefault:!0})}function Ge(){C.forEach(function(t){clearInterval(t.pid)}),C=[]}function Gt(){clearInterval(Ce)}var dt=Rt(function(t,e,n,r){if(!!e.scroll){var o=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,s=e.scrollSpeed,l=X(),u=!1,f;st!==n&&(st=n,Ge(),De=e.scroll,f=e.scrollFn,De===!0&&(De=Z(n,!0)));var d=0,m=De;do{var T=m,b=D(T),w=b.top,L=b.bottom,q=b.left,P=b.right,H=b.width,j=b.height,ae=void 0,Y=void 0,se=T.scrollWidth,Oe=T.scrollHeight,R=h(T),Ae=T.scrollLeft,te=T.scrollTop;T===l?(ae=H<se&&(R.overflowX==="auto"||R.overflowX==="scroll"||R.overflowX==="visible"),Y=j<Oe&&(R.overflowY==="auto"||R.overflowY==="scroll"||R.overflowY==="visible")):(ae=H<se&&(R.overflowX==="auto"||R.overflowX==="scroll"),Y=j<Oe&&(R.overflowY==="auto"||R.overflowY==="scroll"));var Ie=ae&&(Math.abs(P-o)<=a&&Ae+H<se)-(Math.abs(q-o)<=a&&!!Ae),J=Y&&(Math.abs(L-i)<=a&&te+j<Oe)-(Math.abs(w-i)<=a&&!!te);if(!C[d])for(var le=0;le<=d;le++)C[le]||(C[le]={});(C[d].vx!=Ie||C[d].vy!=J||C[d].el!==T)&&(C[d].el=T,C[d].vx=Ie,C[d].vy=J,clearInterval(C[d].pid),(Ie!=0||J!=0)&&(u=!0,C[d].pid=setInterval(function(){r&&this.layer===0&&p.active._onTouchMove(Ue);var Pe=C[this.layer].vy?C[this.layer].vy*s:0,ne=C[this.layer].vx?C[this.layer].vx*s:0;typeof f=="function"&&f.call(p.dragged.parentNode[M],ne,Pe,t,Ue,C[this.layer].el)!=="continue"||Vt(C[this.layer].el,ne,Pe)}.bind({layer:d}),24))),d++}while(e.bubbleScroll&&m!==l&&(m=Z(m,!1)));lt=u}},30),qt=function(e){var n=e.originalEvent,r=e.putSortable,o=e.dragEl,i=e.activeSortable,a=e.dispatchSortableEvent,s=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(!!n){var u=r||i;s();var f=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,d=document.elementFromPoint(f.clientX,f.clientY);l(),u&&!u.el.contains(d)&&(a("spill"),this.onSpill({dragEl:o,putSortable:r}))}};function ft(){}ft.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var o=de(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(n,o):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:qt},z(ft,{pluginName:"revertOnSpill"});function ht(){}ht.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,o=r||this.sortable;o.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),o.animateAll()},drop:qt},z(ht,{pluginName:"removeOnSpill"}),p.mount(new Xn),p.mount(ht,ft);const Yn=document.querySelector("[name='csrf-token']").content;class Jt extends K{connect(){this.sortable=p.create(this.element,{handle:".kubik-navigation-list-node-handle",draggable:"li",direction:"vertical",ghostClass:"kubik-navigation-list-node-ghost",group:this.navigationGroupValue,fallbackOnBody:!0,animation:100,onEnd:this.end.bind(this)})}end(e){let n=new FormData;n.append("node_id",e.item.dataset.nodeId),n.append("position",e.newIndex+1),n.append("parent_id",e.item.parentElement.dataset.nodeId),fetch(this.nodeUpdateUrlValue,{method:"PATCH",headers:{"X-CSRF-Token":Yn,"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:n})}}Jt.values={navigationGroup:String,nodeUpdateUrl:String};const Wn=function(t){document.createElement("optgroup").setAttribute("label",t)},pt=function(t,e){const n=document.createElement("option");return n.innerText=t,Object.entries(e).forEach(r=>{n.setAttribute(r[0],r[1])}),n.outerHTML};document.querySelector("[name='csrf-token']").content;class gt extends K{connect(){if(this.hasScopeSelectionTarget){const e=[...this.scopeSelectionTarget.options].filter(n=>n.dataset.resourceType==this.resourceTypeValue).find(n=>n.value==this.scopeValue);e&&(this.sourceUrlValue=e.dataset.url,this.hasScopeSelectionTarget&&(this.scopeSelectionTarget.value=e.value))}this.paramsValue.id=="__index__"&&(this.selectedResourceValue={id:this.paramsValue.id}),this.listingOptionsUpdate()}resourceTypeChange(e){const n=e.target.options[e.target.selectedIndex];this.resourceTypeValue=n.dataset.resourceType,this.sourceUrlValue=n.dataset.url,this.paramsValue={scope:e.target.value,action:"index"},this.resourceCollectionSelectTarget.disabled=!0,this.resourceCollectionSelectTarget.innerHTML=""}resourceChange(e){const n=e.target.options[e.target.selectedIndex];this.selectedResourceValue={name:n.innerText,id:e.target.value,slug:n.dataset.slug}}resourceTypeValueChanged(){this.hasResourceTypeInputTarget&&(this.resourceTypeInputTarget.value=this.resourceTypeValue)}sourceUrlValueChanged(){this.sourceUrlValue!=""&&(this.hasResourceCollectionSelectTarget&&(this.resourceCollectionSelectTarget.disabled=!0),fetch(this.sourceUrlValue,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(e=>e.json()).then(e=>{this.resourceCollectionSelectTarget.insertAdjacentHTML("beforeend",pt("",{value:""})),this.resourceCollectionSelectTarget.insertAdjacentHTML("beforeend",pt(this.listingOptionLabelValue,{value:this.listingOptionValue})),Wn("List"),e.forEach(n=>{this.resourceCollectionSelectTarget.insertAdjacentHTML("beforeend",pt(n.title,{value:n.id,"data-item-slug":n.title}))}),this.selectedResourceValue=="__index__"?this.resourceCollectionSelectTarget.value="__index__":this.selectedResourceValue.id?this.resourceCollectionSelectTarget.value=this.selectedResourceValue.id:this.resourceCollectionSelectTarget.value="",this.resourceCollectionSelectTarget.disabled=!1}))}selectedResourceValueChanged(){let e="";this.selectedResourceValue.id=="__index__"?(this.showListingOptionsValue=!0,e=`--- ${this.resourceTypeValue} listing ---`):(this.showListingOptionsValue=!1,e=this.paramsValue.name),this.dispatch("titleChange",{detail:{content:e}})}showListingOptionsValueChanged(){this.listingOptionsUpdate()}listingOptionsUpdate(){this.hasNestedChildrenWrapperTarget&&(this.showListingOptionsValue==!0?this.nestedChildrenWrapperTarget.style.display="block":this.nestedChildrenWrapperTarget.style.display="none")}}gt.values={resourceType:String,itemAction:String,params:Object,listingOption:String,listingOptionLabel:String,selectedResource:Object,sourceUrl:String,scope:String,showListingOptions:Boolean,showIndividualOptions:{type:Boolean,default:!1}},gt.targets=["scopeSelection","resourceCollectionSelect","nestedChildrenWrapper","nestedChildrenField","resourceTypeInput"];const zn=function(t){if(t)return t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")};class mt extends K{titleValueChanged(){this.hasTitleTarget&&this.newRecordValue&&(this.titleTarget.value=this.titleValue,this.textTarget.value=this.titleValue,this.slugTarget.value=zn(this.titleValue))}updateTitle({detail:{content:e}}){this.titleValue=e}}mt.values={title:String,newRecord:Boolean},mt.targets=["title","text","slug"],W.DragController=Jt,W.ItemSetupController=mt,W.NavigationSelectorController=Ke,W.ResourceSetupController=gt,Object.defineProperties(W,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
